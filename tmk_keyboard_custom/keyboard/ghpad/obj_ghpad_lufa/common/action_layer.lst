   1               		.file	"action_layer.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.default_layer_state_set,"ax",@progbits
  12               	default_layer_state_set:
  13               	.LFB6:
  14               		.file 1 "../../tmk_core_custom/common/action_layer.c"
   1:../../tmk_core_custom/common/action_layer.c **** #include <stdint.h>
   2:../../tmk_core_custom/common/action_layer.c **** #include "keyboard.h"
   3:../../tmk_core_custom/common/action_layer.c **** #include "action.h"
   4:../../tmk_core_custom/common/action_layer.c **** #include "util.h"
   5:../../tmk_core_custom/common/action_layer.c **** #include "action_layer.h"
   6:../../tmk_core_custom/common/action_layer.c **** 
   7:../../tmk_core_custom/common/action_layer.c **** #ifdef DEBUG_ACTION
   8:../../tmk_core_custom/common/action_layer.c **** #include "debug.h"
   9:../../tmk_core_custom/common/action_layer.c **** #else
  10:../../tmk_core_custom/common/action_layer.c **** #include "nodebug.h"
  11:../../tmk_core_custom/common/action_layer.c **** #endif
  12:../../tmk_core_custom/common/action_layer.c **** 
  13:../../tmk_core_custom/common/action_layer.c **** 
  14:../../tmk_core_custom/common/action_layer.c **** /* 
  15:../../tmk_core_custom/common/action_layer.c ****  * Default Layer State
  16:../../tmk_core_custom/common/action_layer.c ****  */
  17:../../tmk_core_custom/common/action_layer.c **** uint32_t default_layer_state = 0;
  18:../../tmk_core_custom/common/action_layer.c **** 
  19:../../tmk_core_custom/common/action_layer.c **** static void default_layer_state_set(uint32_t state)
  20:../../tmk_core_custom/common/action_layer.c **** {
  15               		.loc 1 20 0
  16               		.cfi_startproc
  17               	.LVL0:
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20               	/* stack size = 0 */
  21               	.L__stack_usage = 0
  21:../../tmk_core_custom/common/action_layer.c ****     debug("default_layer_state: ");
  22:../../tmk_core_custom/common/action_layer.c ****     default_layer_debug(); debug(" to ");
  23:../../tmk_core_custom/common/action_layer.c ****     default_layer_state = state;
  22               		.loc 1 23 0
  23 0000 6093 0000 		sts default_layer_state,r22
  24 0004 7093 0000 		sts default_layer_state+1,r23
  25 0008 8093 0000 		sts default_layer_state+2,r24
  26 000c 9093 0000 		sts default_layer_state+3,r25
  24:../../tmk_core_custom/common/action_layer.c ****     default_layer_debug(); debug("\n");
  25:../../tmk_core_custom/common/action_layer.c **** #ifdef LEDMAP_ENABLE
  26:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_change(state);
  27               		.loc 1 26 0
  28 0010 0E94 0000 		call default_layer_state_change
  29               	.LVL1:
  27:../../tmk_core_custom/common/action_layer.c **** #endif
  28:../../tmk_core_custom/common/action_layer.c ****     clear_keyboard_but_mods(); // To avoid stuck keys
  30               		.loc 1 28 0
  31 0014 0C94 0000 		jmp clear_keyboard_but_mods
  32               	.LVL2:
  33               		.cfi_endproc
  34               	.LFE6:
  36               		.section	.text.layer_state_set,"ax",@progbits
  38               	layer_state_set:
  39               	.LFB12:
  29:../../tmk_core_custom/common/action_layer.c **** }
  30:../../tmk_core_custom/common/action_layer.c **** 
  31:../../tmk_core_custom/common/action_layer.c **** void default_layer_debug(void)
  32:../../tmk_core_custom/common/action_layer.c **** {
  33:../../tmk_core_custom/common/action_layer.c ****     dprintf("%08lX(%u)", default_layer_state, biton32(default_layer_state));
  34:../../tmk_core_custom/common/action_layer.c **** }
  35:../../tmk_core_custom/common/action_layer.c **** 
  36:../../tmk_core_custom/common/action_layer.c **** void default_layer_set(uint32_t state)
  37:../../tmk_core_custom/common/action_layer.c **** {
  38:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(state);
  39:../../tmk_core_custom/common/action_layer.c **** }
  40:../../tmk_core_custom/common/action_layer.c **** 
  41:../../tmk_core_custom/common/action_layer.c **** #ifndef NO_ACTION_LAYER
  42:../../tmk_core_custom/common/action_layer.c **** void default_layer_or(uint32_t state)
  43:../../tmk_core_custom/common/action_layer.c **** {
  44:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state | state);
  45:../../tmk_core_custom/common/action_layer.c **** }
  46:../../tmk_core_custom/common/action_layer.c **** void default_layer_and(uint32_t state)
  47:../../tmk_core_custom/common/action_layer.c **** {
  48:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state & state);
  49:../../tmk_core_custom/common/action_layer.c **** }
  50:../../tmk_core_custom/common/action_layer.c **** void default_layer_xor(uint32_t state)
  51:../../tmk_core_custom/common/action_layer.c **** {
  52:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state ^ state);
  53:../../tmk_core_custom/common/action_layer.c **** }
  54:../../tmk_core_custom/common/action_layer.c **** #endif
  55:../../tmk_core_custom/common/action_layer.c **** 
  56:../../tmk_core_custom/common/action_layer.c **** 
  57:../../tmk_core_custom/common/action_layer.c **** #ifndef NO_ACTION_LAYER
  58:../../tmk_core_custom/common/action_layer.c **** /* 
  59:../../tmk_core_custom/common/action_layer.c ****  * Keymap Layer State
  60:../../tmk_core_custom/common/action_layer.c ****  */
  61:../../tmk_core_custom/common/action_layer.c **** uint32_t layer_state = 0;
  62:../../tmk_core_custom/common/action_layer.c **** 
  63:../../tmk_core_custom/common/action_layer.c **** static void layer_state_set(uint32_t state)
  64:../../tmk_core_custom/common/action_layer.c **** {
  40               		.loc 1 64 0
  41               		.cfi_startproc
  42               	.LVL3:
  43               	/* prologue: function */
  44               	/* frame size = 0 */
  45               	/* stack size = 0 */
  46               	.L__stack_usage = 0
  65:../../tmk_core_custom/common/action_layer.c ****     dprint("layer_state: ");
  66:../../tmk_core_custom/common/action_layer.c ****     layer_debug(); dprint(" to ");
  67:../../tmk_core_custom/common/action_layer.c ****     layer_state = state;
  47               		.loc 1 67 0
  48 0000 6093 0000 		sts layer_state,r22
  49 0004 7093 0000 		sts layer_state+1,r23
  50 0008 8093 0000 		sts layer_state+2,r24
  51 000c 9093 0000 		sts layer_state+3,r25
  68:../../tmk_core_custom/common/action_layer.c ****     layer_debug(); dprintln();
  69:../../tmk_core_custom/common/action_layer.c **** #ifdef LEDMAP_ENABLE
  70:../../tmk_core_custom/common/action_layer.c ****     layer_state_change(state);
  52               		.loc 1 70 0
  53 0010 0E94 0000 		call layer_state_change
  54               	.LVL4:
  71:../../tmk_core_custom/common/action_layer.c **** #endif
  72:../../tmk_core_custom/common/action_layer.c ****     clear_keyboard_but_mods(); // To avoid stuck keys
  55               		.loc 1 72 0
  56 0014 0C94 0000 		jmp clear_keyboard_but_mods
  57               	.LVL5:
  58               		.cfi_endproc
  59               	.LFE12:
  61               		.section	.text.matrix_power_up,"ax",@progbits
  62               		.weak	matrix_power_up
  64               	matrix_power_up:
  65               	.LFB3:
  66               		.file 2 "../../tmk_core_custom/common/keyboard.h"
   1:../../tmk_core_custom/common/keyboard.h **** /*
   2:../../tmk_core_custom/common/keyboard.h **** Copyright 2011,2012,2013 Jun Wako <wakojun@gmail.com>
   3:../../tmk_core_custom/common/keyboard.h **** 
   4:../../tmk_core_custom/common/keyboard.h **** This program is free software: you can redistribute it and/or modify
   5:../../tmk_core_custom/common/keyboard.h **** it under the terms of the GNU General Public License as published by
   6:../../tmk_core_custom/common/keyboard.h **** the Free Software Foundation, either version 2 of the License, or
   7:../../tmk_core_custom/common/keyboard.h **** (at your option) any later version.
   8:../../tmk_core_custom/common/keyboard.h **** 
   9:../../tmk_core_custom/common/keyboard.h **** This program is distributed in the hope that it will be useful,
  10:../../tmk_core_custom/common/keyboard.h **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:../../tmk_core_custom/common/keyboard.h **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:../../tmk_core_custom/common/keyboard.h **** GNU General Public License for more details.
  13:../../tmk_core_custom/common/keyboard.h **** 
  14:../../tmk_core_custom/common/keyboard.h **** You should have received a copy of the GNU General Public License
  15:../../tmk_core_custom/common/keyboard.h **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:../../tmk_core_custom/common/keyboard.h **** */
  17:../../tmk_core_custom/common/keyboard.h **** 
  18:../../tmk_core_custom/common/keyboard.h **** #ifndef KEYBOARD_H
  19:../../tmk_core_custom/common/keyboard.h **** #define KEYBOARD_H
  20:../../tmk_core_custom/common/keyboard.h **** 
  21:../../tmk_core_custom/common/keyboard.h **** #include <stdbool.h>
  22:../../tmk_core_custom/common/keyboard.h **** #include <stdint.h>
  23:../../tmk_core_custom/common/keyboard.h **** 
  24:../../tmk_core_custom/common/keyboard.h **** 
  25:../../tmk_core_custom/common/keyboard.h **** #ifdef __cplusplus
  26:../../tmk_core_custom/common/keyboard.h **** extern "C" {
  27:../../tmk_core_custom/common/keyboard.h **** #endif
  28:../../tmk_core_custom/common/keyboard.h **** 
  29:../../tmk_core_custom/common/keyboard.h **** /* key matrix position */
  30:../../tmk_core_custom/common/keyboard.h **** typedef struct {
  31:../../tmk_core_custom/common/keyboard.h ****     uint8_t col;
  32:../../tmk_core_custom/common/keyboard.h ****     uint8_t row;
  33:../../tmk_core_custom/common/keyboard.h **** } keypos_t;
  34:../../tmk_core_custom/common/keyboard.h **** 
  35:../../tmk_core_custom/common/keyboard.h **** /* key event */
  36:../../tmk_core_custom/common/keyboard.h **** typedef struct {
  37:../../tmk_core_custom/common/keyboard.h ****     keypos_t key;
  38:../../tmk_core_custom/common/keyboard.h ****     bool     pressed;
  39:../../tmk_core_custom/common/keyboard.h ****     uint16_t time;
  40:../../tmk_core_custom/common/keyboard.h **** } keyevent_t;
  41:../../tmk_core_custom/common/keyboard.h **** 
  42:../../tmk_core_custom/common/keyboard.h **** /* equivalent test of keypos_t */
  43:../../tmk_core_custom/common/keyboard.h **** #define KEYEQ(keya, keyb)       ((keya).row == (keyb).row && (keya).col == (keyb).col)
  44:../../tmk_core_custom/common/keyboard.h **** 
  45:../../tmk_core_custom/common/keyboard.h **** /* Rules for No Event:
  46:../../tmk_core_custom/common/keyboard.h ****  * 1) (time == 0) to handle (keyevent_t){} as empty event
  47:../../tmk_core_custom/common/keyboard.h ****  * 2) Matrix(255, 255) to make TICK event available
  48:../../tmk_core_custom/common/keyboard.h ****  */
  49:../../tmk_core_custom/common/keyboard.h **** static inline bool IS_NOEVENT(keyevent_t event) { return event.time == 0 || (event.key.row == 255 &
  50:../../tmk_core_custom/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
  51:../../tmk_core_custom/common/keyboard.h **** static inline bool IS_RELEASED(keyevent_t event) { return (!IS_NOEVENT(event) && !event.pressed); }
  52:../../tmk_core_custom/common/keyboard.h **** 
  53:../../tmk_core_custom/common/keyboard.h **** /* Tick event */
  54:../../tmk_core_custom/common/keyboard.h **** #define TICK                    (keyevent_t){           \
  55:../../tmk_core_custom/common/keyboard.h ****     .key = (keypos_t){ .row = 255, .col = 255 },           \
  56:../../tmk_core_custom/common/keyboard.h ****     .pressed = false,                                   \
  57:../../tmk_core_custom/common/keyboard.h ****     .time = (timer_read() | 1)                          \
  58:../../tmk_core_custom/common/keyboard.h **** }
  59:../../tmk_core_custom/common/keyboard.h **** 
  60:../../tmk_core_custom/common/keyboard.h **** 
  61:../../tmk_core_custom/common/keyboard.h **** void keyboard_init(void);
  62:../../tmk_core_custom/common/keyboard.h **** void keyboard_task(void);
  63:../../tmk_core_custom/common/keyboard.h **** void keyboard_set_leds(uint8_t leds);
  64:../../tmk_core_custom/common/keyboard.h **** 
  65:../../tmk_core_custom/common/keyboard.h **** __attribute__ ((weak)) void matrix_power_up(void) {}
  67               		.loc 2 65 0
  68               		.cfi_startproc
  69               	/* prologue: function */
  70               	/* frame size = 0 */
  71               	/* stack size = 0 */
  72               	.L__stack_usage = 0
  73 0000 0895      		ret
  74               		.cfi_endproc
  75               	.LFE3:
  77               		.section	.text.matrix_power_down,"ax",@progbits
  78               		.weak	matrix_power_down
  80               	matrix_power_down:
  81               	.LFB4:
  66:../../tmk_core_custom/common/keyboard.h **** __attribute__ ((weak)) void matrix_power_down(void) {}
  82               		.loc 2 66 0
  83               		.cfi_startproc
  84               	/* prologue: function */
  85               	/* frame size = 0 */
  86               	/* stack size = 0 */
  87               	.L__stack_usage = 0
  88 0000 0895      		ret
  89               		.cfi_endproc
  90               	.LFE4:
  92               		.section	.text.default_layer_debug,"ax",@progbits
  93               	.global	default_layer_debug
  95               	default_layer_debug:
  96               	.LFB7:
  32:../../tmk_core_custom/common/action_layer.c **** {
  97               		.loc 1 32 0
  98               		.cfi_startproc
  99               	/* prologue: function */
 100               	/* frame size = 0 */
 101               	/* stack size = 0 */
 102               	.L__stack_usage = 0
 103 0000 0895      		ret
 104               		.cfi_endproc
 105               	.LFE7:
 107               		.section	.text.default_layer_set,"ax",@progbits
 108               	.global	default_layer_set
 110               	default_layer_set:
 111               	.LFB8:
  37:../../tmk_core_custom/common/action_layer.c **** {
 112               		.loc 1 37 0
 113               		.cfi_startproc
 114               	.LVL6:
 115               	/* prologue: function */
 116               	/* frame size = 0 */
 117               	/* stack size = 0 */
 118               	.L__stack_usage = 0
  38:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(state);
 119               		.loc 1 38 0
 120 0000 0C94 0000 		jmp default_layer_state_set
 121               	.LVL7:
 122               		.cfi_endproc
 123               	.LFE8:
 125               		.section	.text.default_layer_or,"ax",@progbits
 126               	.global	default_layer_or
 128               	default_layer_or:
 129               	.LFB9:
  43:../../tmk_core_custom/common/action_layer.c **** {
 130               		.loc 1 43 0
 131               		.cfi_startproc
 132               	.LVL8:
 133 0000 0F93      		push r16
 134               	.LCFI0:
 135               		.cfi_def_cfa_offset 3
 136               		.cfi_offset 16, -2
 137 0002 1F93      		push r17
 138               	.LCFI1:
 139               		.cfi_def_cfa_offset 4
 140               		.cfi_offset 17, -3
 141               	/* prologue: function */
 142               	/* frame size = 0 */
 143               	/* stack size = 2 */
 144               	.L__stack_usage = 2
  44:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state | state);
 145               		.loc 1 44 0
 146 0004 0091 0000 		lds r16,default_layer_state
 147 0008 1091 0000 		lds r17,default_layer_state+1
 148 000c 2091 0000 		lds r18,default_layer_state+2
 149 0010 3091 0000 		lds r19,default_layer_state+3
 150 0014 602B      		or r22,r16
 151 0016 712B      		or r23,r17
 152 0018 822B      		or r24,r18
 153 001a 932B      		or r25,r19
 154               	.LVL9:
 155               	/* epilogue start */
  45:../../tmk_core_custom/common/action_layer.c **** }
 156               		.loc 1 45 0
 157 001c 1F91      		pop r17
 158 001e 0F91      		pop r16
  44:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state | state);
 159               		.loc 1 44 0
 160 0020 0C94 0000 		jmp default_layer_state_set
 161               	.LVL10:
 162               		.cfi_endproc
 163               	.LFE9:
 165               		.section	.text.default_layer_and,"ax",@progbits
 166               	.global	default_layer_and
 168               	default_layer_and:
 169               	.LFB10:
  47:../../tmk_core_custom/common/action_layer.c **** {
 170               		.loc 1 47 0
 171               		.cfi_startproc
 172               	.LVL11:
 173 0000 0F93      		push r16
 174               	.LCFI2:
 175               		.cfi_def_cfa_offset 3
 176               		.cfi_offset 16, -2
 177 0002 1F93      		push r17
 178               	.LCFI3:
 179               		.cfi_def_cfa_offset 4
 180               		.cfi_offset 17, -3
 181               	/* prologue: function */
 182               	/* frame size = 0 */
 183               	/* stack size = 2 */
 184               	.L__stack_usage = 2
  48:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state & state);
 185               		.loc 1 48 0
 186 0004 0091 0000 		lds r16,default_layer_state
 187 0008 1091 0000 		lds r17,default_layer_state+1
 188 000c 2091 0000 		lds r18,default_layer_state+2
 189 0010 3091 0000 		lds r19,default_layer_state+3
 190 0014 6023      		and r22,r16
 191 0016 7123      		and r23,r17
 192 0018 8223      		and r24,r18
 193 001a 9323      		and r25,r19
 194               	.LVL12:
 195               	/* epilogue start */
  49:../../tmk_core_custom/common/action_layer.c **** }
 196               		.loc 1 49 0
 197 001c 1F91      		pop r17
 198 001e 0F91      		pop r16
  48:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state & state);
 199               		.loc 1 48 0
 200 0020 0C94 0000 		jmp default_layer_state_set
 201               	.LVL13:
 202               		.cfi_endproc
 203               	.LFE10:
 205               		.section	.text.default_layer_xor,"ax",@progbits
 206               	.global	default_layer_xor
 208               	default_layer_xor:
 209               	.LFB11:
  51:../../tmk_core_custom/common/action_layer.c **** {
 210               		.loc 1 51 0
 211               		.cfi_startproc
 212               	.LVL14:
 213 0000 0F93      		push r16
 214               	.LCFI4:
 215               		.cfi_def_cfa_offset 3
 216               		.cfi_offset 16, -2
 217 0002 1F93      		push r17
 218               	.LCFI5:
 219               		.cfi_def_cfa_offset 4
 220               		.cfi_offset 17, -3
 221               	/* prologue: function */
 222               	/* frame size = 0 */
 223               	/* stack size = 2 */
 224               	.L__stack_usage = 2
  52:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state ^ state);
 225               		.loc 1 52 0
 226 0004 0091 0000 		lds r16,default_layer_state
 227 0008 1091 0000 		lds r17,default_layer_state+1
 228 000c 2091 0000 		lds r18,default_layer_state+2
 229 0010 3091 0000 		lds r19,default_layer_state+3
 230 0014 6027      		eor r22,r16
 231 0016 7127      		eor r23,r17
 232 0018 8227      		eor r24,r18
 233 001a 9327      		eor r25,r19
 234               	.LVL15:
 235               	/* epilogue start */
  53:../../tmk_core_custom/common/action_layer.c **** }
 236               		.loc 1 53 0
 237 001c 1F91      		pop r17
 238 001e 0F91      		pop r16
  52:../../tmk_core_custom/common/action_layer.c ****     default_layer_state_set(default_layer_state ^ state);
 239               		.loc 1 52 0
 240 0020 0C94 0000 		jmp default_layer_state_set
 241               	.LVL16:
 242               		.cfi_endproc
 243               	.LFE11:
 245               		.section	.text.layer_clear,"ax",@progbits
 246               	.global	layer_clear
 248               	layer_clear:
 249               	.LFB13:
  73:../../tmk_core_custom/common/action_layer.c **** }
  74:../../tmk_core_custom/common/action_layer.c **** 
  75:../../tmk_core_custom/common/action_layer.c **** void layer_clear(void)
  76:../../tmk_core_custom/common/action_layer.c **** {
 250               		.loc 1 76 0
 251               		.cfi_startproc
 252               	/* prologue: function */
 253               	/* frame size = 0 */
 254               	/* stack size = 0 */
 255               	.L__stack_usage = 0
  77:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(0);
 256               		.loc 1 77 0
 257 0000 60E0      		ldi r22,0
 258 0002 70E0      		ldi r23,0
 259 0004 CB01      		movw r24,r22
 260 0006 0C94 0000 		jmp layer_state_set
 261               	.LVL17:
 262               		.cfi_endproc
 263               	.LFE13:
 265               		.section	.text.layer_move,"ax",@progbits
 266               	.global	layer_move
 268               	layer_move:
 269               	.LFB14:
  78:../../tmk_core_custom/common/action_layer.c **** }
  79:../../tmk_core_custom/common/action_layer.c **** 
  80:../../tmk_core_custom/common/action_layer.c **** void layer_move(uint8_t layer)
  81:../../tmk_core_custom/common/action_layer.c **** {
 270               		.loc 1 81 0
 271               		.cfi_startproc
 272               	.LVL18:
 273               	/* prologue: function */
 274               	/* frame size = 0 */
 275               	/* stack size = 0 */
 276               	.L__stack_usage = 0
  82:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(1UL<<layer);
 277               		.loc 1 82 0
 278 0000 41E0      		ldi r20,lo8(1)
 279 0002 50E0      		ldi r21,0
 280 0004 60E0      		ldi r22,0
 281 0006 70E0      		ldi r23,0
 282 0008 00C0      		rjmp 2f
 283               		1:
 284 000a 440F      		lsl r20
 285 000c 551F      		rol r21
 286 000e 661F      		rol r22
 287 0010 771F      		rol r23
 288               		2:
 289 0012 8A95      		dec r24
 290 0014 02F4      		brpl 1b
 291 0016 CB01      		movw r24,r22
 292 0018 BA01      		movw r22,r20
 293 001a 0C94 0000 		jmp layer_state_set
 294               	.LVL19:
 295               		.cfi_endproc
 296               	.LFE14:
 298               		.section	.text.layer_on,"ax",@progbits
 299               	.global	layer_on
 301               	layer_on:
 302               	.LFB15:
  83:../../tmk_core_custom/common/action_layer.c **** }
  84:../../tmk_core_custom/common/action_layer.c **** 
  85:../../tmk_core_custom/common/action_layer.c **** void layer_on(uint8_t layer)
  86:../../tmk_core_custom/common/action_layer.c **** {
 303               		.loc 1 86 0
 304               		.cfi_startproc
 305               	.LVL20:
 306               	/* prologue: function */
 307               	/* frame size = 0 */
 308               	/* stack size = 0 */
 309               	.L__stack_usage = 0
  87:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state | (1UL<<layer));
 310               		.loc 1 87 0
 311 0000 41E0      		ldi r20,lo8(1)
 312 0002 50E0      		ldi r21,0
 313 0004 60E0      		ldi r22,0
 314 0006 70E0      		ldi r23,0
 315 0008 00C0      		rjmp 2f
 316               		1:
 317 000a 440F      		lsl r20
 318 000c 551F      		rol r21
 319 000e 661F      		rol r22
 320 0010 771F      		rol r23
 321               		2:
 322 0012 8A95      		dec r24
 323 0014 02F4      		brpl 1b
 324 0016 8091 0000 		lds r24,layer_state
 325 001a 9091 0000 		lds r25,layer_state+1
 326 001e A091 0000 		lds r26,layer_state+2
 327 0022 B091 0000 		lds r27,layer_state+3
 328               	.LVL21:
 329 0026 482B      		or r20,r24
 330 0028 592B      		or r21,r25
 331 002a 6A2B      		or r22,r26
 332 002c 7B2B      		or r23,r27
 333 002e CB01      		movw r24,r22
 334 0030 BA01      		movw r22,r20
 335 0032 0C94 0000 		jmp layer_state_set
 336               	.LVL22:
 337               		.cfi_endproc
 338               	.LFE15:
 340               		.section	.text.layer_off,"ax",@progbits
 341               	.global	layer_off
 343               	layer_off:
 344               	.LFB16:
  88:../../tmk_core_custom/common/action_layer.c **** }
  89:../../tmk_core_custom/common/action_layer.c **** 
  90:../../tmk_core_custom/common/action_layer.c **** void layer_off(uint8_t layer)
  91:../../tmk_core_custom/common/action_layer.c **** {
 345               		.loc 1 91 0
 346               		.cfi_startproc
 347               	.LVL23:
 348               	/* prologue: function */
 349               	/* frame size = 0 */
 350               	/* stack size = 0 */
 351               	.L__stack_usage = 0
  92:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state & ~(1UL<<layer));
 352               		.loc 1 92 0
 353 0000 41E0      		ldi r20,lo8(1)
 354 0002 50E0      		ldi r21,0
 355 0004 60E0      		ldi r22,0
 356 0006 70E0      		ldi r23,0
 357 0008 00C0      		rjmp 2f
 358               		1:
 359 000a 440F      		lsl r20
 360 000c 551F      		rol r21
 361 000e 661F      		rol r22
 362 0010 771F      		rol r23
 363               		2:
 364 0012 8A95      		dec r24
 365 0014 02F4      		brpl 1b
 366 0016 4095      		com r20
 367 0018 5095      		com r21
 368 001a 6095      		com r22
 369 001c 7095      		com r23
 370 001e 8091 0000 		lds r24,layer_state
 371 0022 9091 0000 		lds r25,layer_state+1
 372 0026 A091 0000 		lds r26,layer_state+2
 373 002a B091 0000 		lds r27,layer_state+3
 374               	.LVL24:
 375 002e 4823      		and r20,r24
 376 0030 5923      		and r21,r25
 377 0032 6A23      		and r22,r26
 378 0034 7B23      		and r23,r27
 379 0036 CB01      		movw r24,r22
 380 0038 BA01      		movw r22,r20
 381 003a 0C94 0000 		jmp layer_state_set
 382               	.LVL25:
 383               		.cfi_endproc
 384               	.LFE16:
 386               		.section	.text.layer_invert,"ax",@progbits
 387               	.global	layer_invert
 389               	layer_invert:
 390               	.LFB17:
  93:../../tmk_core_custom/common/action_layer.c **** }
  94:../../tmk_core_custom/common/action_layer.c **** 
  95:../../tmk_core_custom/common/action_layer.c **** void layer_invert(uint8_t layer)
  96:../../tmk_core_custom/common/action_layer.c **** {
 391               		.loc 1 96 0
 392               		.cfi_startproc
 393               	.LVL26:
 394               	/* prologue: function */
 395               	/* frame size = 0 */
 396               	/* stack size = 0 */
 397               	.L__stack_usage = 0
  97:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state ^ (1UL<<layer));
 398               		.loc 1 97 0
 399 0000 41E0      		ldi r20,lo8(1)
 400 0002 50E0      		ldi r21,0
 401 0004 60E0      		ldi r22,0
 402 0006 70E0      		ldi r23,0
 403 0008 00C0      		rjmp 2f
 404               		1:
 405 000a 440F      		lsl r20
 406 000c 551F      		rol r21
 407 000e 661F      		rol r22
 408 0010 771F      		rol r23
 409               		2:
 410 0012 8A95      		dec r24
 411 0014 02F4      		brpl 1b
 412 0016 8091 0000 		lds r24,layer_state
 413 001a 9091 0000 		lds r25,layer_state+1
 414 001e A091 0000 		lds r26,layer_state+2
 415 0022 B091 0000 		lds r27,layer_state+3
 416               	.LVL27:
 417 0026 4827      		eor r20,r24
 418 0028 5927      		eor r21,r25
 419 002a 6A27      		eor r22,r26
 420 002c 7B27      		eor r23,r27
 421 002e CB01      		movw r24,r22
 422 0030 BA01      		movw r22,r20
 423 0032 0C94 0000 		jmp layer_state_set
 424               	.LVL28:
 425               		.cfi_endproc
 426               	.LFE17:
 428               		.section	.text.layer_or,"ax",@progbits
 429               	.global	layer_or
 431               	layer_or:
 432               	.LFB18:
  98:../../tmk_core_custom/common/action_layer.c **** }
  99:../../tmk_core_custom/common/action_layer.c **** 
 100:../../tmk_core_custom/common/action_layer.c **** void layer_or(uint32_t state)
 101:../../tmk_core_custom/common/action_layer.c **** {
 433               		.loc 1 101 0
 434               		.cfi_startproc
 435               	.LVL29:
 436 0000 0F93      		push r16
 437               	.LCFI6:
 438               		.cfi_def_cfa_offset 3
 439               		.cfi_offset 16, -2
 440 0002 1F93      		push r17
 441               	.LCFI7:
 442               		.cfi_def_cfa_offset 4
 443               		.cfi_offset 17, -3
 444               	/* prologue: function */
 445               	/* frame size = 0 */
 446               	/* stack size = 2 */
 447               	.L__stack_usage = 2
 102:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state | state);
 448               		.loc 1 102 0
 449 0004 0091 0000 		lds r16,layer_state
 450 0008 1091 0000 		lds r17,layer_state+1
 451 000c 2091 0000 		lds r18,layer_state+2
 452 0010 3091 0000 		lds r19,layer_state+3
 453 0014 602B      		or r22,r16
 454 0016 712B      		or r23,r17
 455 0018 822B      		or r24,r18
 456 001a 932B      		or r25,r19
 457               	.LVL30:
 458               	/* epilogue start */
 103:../../tmk_core_custom/common/action_layer.c **** }
 459               		.loc 1 103 0
 460 001c 1F91      		pop r17
 461 001e 0F91      		pop r16
 102:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state | state);
 462               		.loc 1 102 0
 463 0020 0C94 0000 		jmp layer_state_set
 464               	.LVL31:
 465               		.cfi_endproc
 466               	.LFE18:
 468               		.section	.text.layer_and,"ax",@progbits
 469               	.global	layer_and
 471               	layer_and:
 472               	.LFB19:
 104:../../tmk_core_custom/common/action_layer.c **** void layer_and(uint32_t state)
 105:../../tmk_core_custom/common/action_layer.c **** {
 473               		.loc 1 105 0
 474               		.cfi_startproc
 475               	.LVL32:
 476 0000 0F93      		push r16
 477               	.LCFI8:
 478               		.cfi_def_cfa_offset 3
 479               		.cfi_offset 16, -2
 480 0002 1F93      		push r17
 481               	.LCFI9:
 482               		.cfi_def_cfa_offset 4
 483               		.cfi_offset 17, -3
 484               	/* prologue: function */
 485               	/* frame size = 0 */
 486               	/* stack size = 2 */
 487               	.L__stack_usage = 2
 106:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state & state);
 488               		.loc 1 106 0
 489 0004 0091 0000 		lds r16,layer_state
 490 0008 1091 0000 		lds r17,layer_state+1
 491 000c 2091 0000 		lds r18,layer_state+2
 492 0010 3091 0000 		lds r19,layer_state+3
 493 0014 6023      		and r22,r16
 494 0016 7123      		and r23,r17
 495 0018 8223      		and r24,r18
 496 001a 9323      		and r25,r19
 497               	.LVL33:
 498               	/* epilogue start */
 107:../../tmk_core_custom/common/action_layer.c **** }
 499               		.loc 1 107 0
 500 001c 1F91      		pop r17
 501 001e 0F91      		pop r16
 106:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state & state);
 502               		.loc 1 106 0
 503 0020 0C94 0000 		jmp layer_state_set
 504               	.LVL34:
 505               		.cfi_endproc
 506               	.LFE19:
 508               		.section	.text.layer_xor,"ax",@progbits
 509               	.global	layer_xor
 511               	layer_xor:
 512               	.LFB20:
 108:../../tmk_core_custom/common/action_layer.c **** void layer_xor(uint32_t state)
 109:../../tmk_core_custom/common/action_layer.c **** {
 513               		.loc 1 109 0
 514               		.cfi_startproc
 515               	.LVL35:
 516 0000 0F93      		push r16
 517               	.LCFI10:
 518               		.cfi_def_cfa_offset 3
 519               		.cfi_offset 16, -2
 520 0002 1F93      		push r17
 521               	.LCFI11:
 522               		.cfi_def_cfa_offset 4
 523               		.cfi_offset 17, -3
 524               	/* prologue: function */
 525               	/* frame size = 0 */
 526               	/* stack size = 2 */
 527               	.L__stack_usage = 2
 110:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state ^ state);
 528               		.loc 1 110 0
 529 0004 0091 0000 		lds r16,layer_state
 530 0008 1091 0000 		lds r17,layer_state+1
 531 000c 2091 0000 		lds r18,layer_state+2
 532 0010 3091 0000 		lds r19,layer_state+3
 533 0014 6027      		eor r22,r16
 534 0016 7127      		eor r23,r17
 535 0018 8227      		eor r24,r18
 536 001a 9327      		eor r25,r19
 537               	.LVL36:
 538               	/* epilogue start */
 111:../../tmk_core_custom/common/action_layer.c **** }
 539               		.loc 1 111 0
 540 001c 1F91      		pop r17
 541 001e 0F91      		pop r16
 110:../../tmk_core_custom/common/action_layer.c ****     layer_state_set(layer_state ^ state);
 542               		.loc 1 110 0
 543 0020 0C94 0000 		jmp layer_state_set
 544               	.LVL37:
 545               		.cfi_endproc
 546               	.LFE20:
 548               		.section	.text.layer_debug,"ax",@progbits
 549               	.global	layer_debug
 551               	layer_debug:
 552               	.LFB21:
 112:../../tmk_core_custom/common/action_layer.c **** 
 113:../../tmk_core_custom/common/action_layer.c **** void layer_debug(void)
 114:../../tmk_core_custom/common/action_layer.c **** {
 553               		.loc 1 114 0
 554               		.cfi_startproc
 555               	/* prologue: function */
 556               	/* frame size = 0 */
 557               	/* stack size = 0 */
 558               	.L__stack_usage = 0
 559 0000 0895      		ret
 560               		.cfi_endproc
 561               	.LFE21:
 563               		.section	.text.layer_switch_get_action,"ax",@progbits
 564               	.global	layer_switch_get_action
 566               	layer_switch_get_action:
 567               	.LFB22:
 115:../../tmk_core_custom/common/action_layer.c ****     dprintf("%08lX(%u)", layer_state, biton32(layer_state));
 116:../../tmk_core_custom/common/action_layer.c **** }
 117:../../tmk_core_custom/common/action_layer.c **** #endif
 118:../../tmk_core_custom/common/action_layer.c **** 
 119:../../tmk_core_custom/common/action_layer.c **** 
 120:../../tmk_core_custom/common/action_layer.c **** 
 121:../../tmk_core_custom/common/action_layer.c **** action_t layer_switch_get_action(keypos_t key)
 122:../../tmk_core_custom/common/action_layer.c **** {
 568               		.loc 1 122 0
 569               		.cfi_startproc
 570               	.LVL38:
 571               		.loc 1 122 0
 572 0000 CF92      		push r12
 573               	.LCFI12:
 574               		.cfi_def_cfa_offset 3
 575               		.cfi_offset 12, -2
 576 0002 DF92      		push r13
 577               	.LCFI13:
 578               		.cfi_def_cfa_offset 4
 579               		.cfi_offset 13, -3
 580 0004 EF92      		push r14
 581               	.LCFI14:
 582               		.cfi_def_cfa_offset 5
 583               		.cfi_offset 14, -4
 584 0006 FF92      		push r15
 585               	.LCFI15:
 586               		.cfi_def_cfa_offset 6
 587               		.cfi_offset 15, -5
 588 0008 0F93      		push r16
 589               	.LCFI16:
 590               		.cfi_def_cfa_offset 7
 591               		.cfi_offset 16, -6
 592 000a 1F93      		push r17
 593               	.LCFI17:
 594               		.cfi_def_cfa_offset 8
 595               		.cfi_offset 17, -7
 596 000c CF93      		push r28
 597               	.LCFI18:
 598               		.cfi_def_cfa_offset 9
 599               		.cfi_offset 28, -8
 600 000e DF93      		push r29
 601               	.LCFI19:
 602               		.cfi_def_cfa_offset 10
 603               		.cfi_offset 29, -9
 604               	/* prologue: function */
 605               	/* frame size = 0 */
 606               	/* stack size = 8 */
 607               	.L__stack_usage = 8
 608 0010 EC01      		movw r28,r24
 609               	.LVL39:
 123:../../tmk_core_custom/common/action_layer.c ****     action_t action;
 124:../../tmk_core_custom/common/action_layer.c ****     action.code = ACTION_TRANSPARENT;
 125:../../tmk_core_custom/common/action_layer.c **** 
 126:../../tmk_core_custom/common/action_layer.c **** #ifndef NO_ACTION_LAYER
 127:../../tmk_core_custom/common/action_layer.c ****     uint32_t layers = layer_state | default_layer_state;
 610               		.loc 1 127 0
 611 0012 C090 0000 		lds r12,default_layer_state
 612 0016 D090 0000 		lds r13,default_layer_state+1
 613 001a E090 0000 		lds r14,default_layer_state+2
 614 001e F090 0000 		lds r15,default_layer_state+3
 615 0022 8091 0000 		lds r24,layer_state
 616 0026 9091 0000 		lds r25,layer_state+1
 617 002a A091 0000 		lds r26,layer_state+2
 618 002e B091 0000 		lds r27,layer_state+3
 619               	.LVL40:
 620 0032 C82A      		or r12,r24
 621 0034 D92A      		or r13,r25
 622 0036 EA2A      		or r14,r26
 623 0038 FB2A      		or r15,r27
 624               	.LVL41:
 625 003a 0FE1      		ldi r16,lo8(31)
 626 003c 10E0      		ldi r17,0
 627               	.LVL42:
 628               	.L23:
 629               	.LBB2:
 128:../../tmk_core_custom/common/action_layer.c ****     /* check top layer first */
 129:../../tmk_core_custom/common/action_layer.c ****     for (int8_t i = 31; i >= 0; i--) {
 130:../../tmk_core_custom/common/action_layer.c ****         if (layers & (1UL<<i)) {
 630               		.loc 1 130 0
 631 003e B701      		movw r22,r14
 632 0040 A601      		movw r20,r12
 633 0042 002E      		mov r0,r16
 634 0044 00C0      		rjmp 2f
 635               		1:
 636 0046 7695      		lsr r23
 637 0048 6795      		ror r22
 638 004a 5795      		ror r21
 639 004c 4795      		ror r20
 640               		2:
 641 004e 0A94      		dec r0
 642 0050 02F4      		brpl 1b
 643 0052 40FF      		sbrs r20,0
 644 0054 00C0      		rjmp .L20
 131:../../tmk_core_custom/common/action_layer.c ****             action = action_for_key(i, key);
 645               		.loc 1 131 0
 646 0056 BE01      		movw r22,r28
 647 0058 802F      		mov r24,r16
 648 005a 0E94 0000 		call action_for_key
 649               	.LVL43:
 132:../../tmk_core_custom/common/action_layer.c ****             if (action.code != ACTION_TRANSPARENT) {
 650               		.loc 1 132 0
 651 005e 8130      		cpi r24,1
 652 0060 9105      		cpc r25,__zero_reg__
 653 0062 01F4      		brne .L21
 654               	.LVL44:
 655               	.L20:
 656               	.LVL45:
 657 0064 0150      		subi r16,1
 658 0066 1109      		sbc r17,__zero_reg__
 659 0068 00F4      		brcc .L23
 660               	.LBE2:
 133:../../tmk_core_custom/common/action_layer.c ****                 return action;
 134:../../tmk_core_custom/common/action_layer.c ****             }
 135:../../tmk_core_custom/common/action_layer.c ****         }
 136:../../tmk_core_custom/common/action_layer.c ****     }
 137:../../tmk_core_custom/common/action_layer.c ****     /* fall back to layer 0 */
 138:../../tmk_core_custom/common/action_layer.c ****     action = action_for_key(0, key);
 661               		.loc 1 138 0
 662 006a BE01      		movw r22,r28
 663 006c 80E0      		ldi r24,0
 664 006e 0E94 0000 		call action_for_key
 665               	.LVL46:
 666               	.L21:
 667               	.LVL47:
 668               	/* epilogue start */
 139:../../tmk_core_custom/common/action_layer.c ****     return action;
 140:../../tmk_core_custom/common/action_layer.c **** #else
 141:../../tmk_core_custom/common/action_layer.c ****     action = action_for_key(biton32(default_layer_state), key);
 142:../../tmk_core_custom/common/action_layer.c ****     return action;
 143:../../tmk_core_custom/common/action_layer.c **** #endif
 144:../../tmk_core_custom/common/action_layer.c **** }
 669               		.loc 1 144 0
 670 0072 DF91      		pop r29
 671 0074 CF91      		pop r28
 672               	.LVL48:
 673 0076 1F91      		pop r17
 674 0078 0F91      		pop r16
 675 007a FF90      		pop r15
 676 007c EF90      		pop r14
 677 007e DF90      		pop r13
 678 0080 CF90      		pop r12
 679               	.LVL49:
 680 0082 0895      		ret
 681               		.cfi_endproc
 682               	.LFE22:
 684               	.global	layer_state
 685               		.section	.bss.layer_state,"aw",@nobits
 688               	layer_state:
 689 0000 0000 0000 		.zero	4
 690               	.global	default_layer_state
 691               		.section	.bss.default_layer_state,"aw",@nobits
 694               	default_layer_state:
 695 0000 0000 0000 		.zero	4
 696               		.text
 697               	.Letext0:
 698               		.file 3 "/usr/local/CrossPack-AVR-20131216/avr/include/stdint.h"
 699               		.file 4 "../../tmk_core_custom/common/action_code.h"
 700               		.file 5 "../../tmk_core_custom/common/action_layer.h"
 701               		.file 6 "../../tmk_core_custom/common/action.h"
DEFINED SYMBOLS
                            *ABS*:00000000 action_layer.c
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:2      *ABS*:0000003e __SP_H__
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:3      *ABS*:0000003d __SP_L__
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:4      *ABS*:0000003f __SREG__
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:5      *ABS*:00000000 __tmp_reg__
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:6      *ABS*:00000001 __zero_reg__
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:12     .text.default_layer_state_set:00000000 default_layer_state_set
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:694    .bss.default_layer_state:00000000 default_layer_state
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:38     .text.layer_state_set:00000000 layer_state_set
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:688    .bss.layer_state:00000000 layer_state
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:64     .text.matrix_power_up:00000000 matrix_power_up
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:80     .text.matrix_power_down:00000000 matrix_power_down
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:95     .text.default_layer_debug:00000000 default_layer_debug
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:110    .text.default_layer_set:00000000 default_layer_set
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:128    .text.default_layer_or:00000000 default_layer_or
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:168    .text.default_layer_and:00000000 default_layer_and
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:208    .text.default_layer_xor:00000000 default_layer_xor
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:248    .text.layer_clear:00000000 layer_clear
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:268    .text.layer_move:00000000 layer_move
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:301    .text.layer_on:00000000 layer_on
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:343    .text.layer_off:00000000 layer_off
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:389    .text.layer_invert:00000000 layer_invert
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:431    .text.layer_or:00000000 layer_or
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:471    .text.layer_and:00000000 layer_and
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:511    .text.layer_xor:00000000 layer_xor
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:551    .text.layer_debug:00000000 layer_debug
/var/folders/21/2h6z05gn50s9p53ctp4w8vd00000gn/T//cccw7QcU.s:566    .text.layer_switch_get_action:00000000 layer_switch_get_action

UNDEFINED SYMBOLS
default_layer_state_change
clear_keyboard_but_mods
layer_state_change
action_for_key
__do_clear_bss
